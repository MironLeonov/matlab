### Задача

Пусть в рабочей папке имеется файл testrecursion.m следующего содержания (см. файл)

Требуется объяснить выдачу, которая получится в результате его исполнения. Затем сделать то же после замены строки

```matlab
y = [x fun(level)];
```

на строку

```matlab
y = [fun(level) x];
```

### Ответ

(Не очень понятно что делают строки 2-3, похоже ничего)

Persistent создает переменную, которая имеет один и тот же адрес памяти для всех вызовов функции, в которой она была объявлена, т.е. ее область видимости все вызовы этой функции.

До замены:
Определяется персистентная переменная x. Так как это первый вызов fun, то x пустая, поэтому в условном операторе ей присваивается значение 0. В следующем условном операторе происходит проверка на количество переданных аргументов. При первом вызове из нет (тк disp(fun)), соответственно level присваивается 0. Далее происходит проверка глубины рекурсии, и начинает собираться результирующий массив из значения x (=0) и значения рекурсивного вызова fun(level). Далее мы спускаемся по рекурсии постепенно увеличивая глубину и значение x, при этом все промежуточные значения x сохраняются в массиве-результате, а переход на след уровень рекурсии осуществляется только после этого сохранения. Поэтому после выхода из рекурсии мы видим 0 1 2 3 4 5.

После замены:
До начала рекурсии все так же как и до замены. Но теперь массив-результат собирается в другом порядке: сначала вызывается рекурсивная функция и только затем – берется значение x. Таким образом мы спускаемся по рекурсии до 5 уровня, где значение x = 5 и только после этого, при возвращении по стеку вызовов и сохраняем значение x в массив, которое к тому моменту уже 5. Поэтому видим результат 5 5 5 5 5 5.
